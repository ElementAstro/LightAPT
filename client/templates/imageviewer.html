<!--

   Copyright(c) 2022-2023 Max Qian  <astroair.cn>

   This program is free software; you can redistribute it and/or modify
   it under the terms of the GNU General Public License as published by
   the Free Software Foundation; either version 2 of the License, or
   (at your option) any later version.
   
   This program is distributed in the hope that it will be useful,
   but WITHOUT ANY WARRANTY; without even the implied warranty of
   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
   GNU General Public License for more details.
   
   You should have received a copy of the GNU General Public License
   along with this program; if not, write to the Free Software
   Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston,
   MA 02110-1301, USA.
   
-->

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Image Viewer</title>

    <link rel='Shortcut Icon' type='image/x-icon' href='/static/textures/icons/imageviewer.png'>

    <!-- Icheck -->
    <link rel="stylesheet" href="/static/css/bootstrap/icheck-bootstrap.min.css">
    <!-- Viewer -->
    <link rel="stylesheet" href="/static/css/plugins/viewer.min.css">
    <!-- Loading animation -->
    <link rel="stylesheet" href="/static/css/client/loading.css">

    {{ basic.load_basic_css() }}

    <style>
        .docs-pictures {
            list-style: none;
            margin: 0;
            padding: 0;
        }

        .docs-pictures>li {
            border: 1px solid transparent;
            float: left;
            height: calc(100% / 3);
            margin: 0 -1px -1px 0;
            overflow: hidden;
            width: calc(100% / 3);
        }

        .docs-pictures>li>img {
            cursor: -webkit-zoom-in;
            cursor: zoom-in;
            width: 100%;
        }
    </style>
</head>

<body style="height: auto;" class="dark-mode">
    <!-- loading开始 -->
    <div id="loading-animation">
        <div id="loading-animation-center">
            <div id="loading-animation-center-absolute">
                <div class="loading_object" id="loading_four"></div>
                <div class="loading_object" id="loading_three"></div>
                <div class="loading_object" id="loading_two"></div>
                <div class="loading_object" id="loading_one"></div>
            </div>
        </div>
    </div>
    <script>!function () { function e() { setTimeout(() => { $("#loading-animation").fadeOut(540) }, 500) } window.jQuery ? $(document).ready(() => { e() }) : document.onreadystatechange = (() => { "interactive" === document.readyState && e() }) }();</script>
    <!-- loading 结束 -->
    <div class="wrapper">
        <!-- Main content -->
        <section class="content" data-widget="iframe">
            <div class="container-fluid">
                <div class="row">
                    <div class="col px-lg-1 px-xl-2 mb-xl-4 mb-2">
                        <div class="card elegant-color h100 card-default card-primary">
                            <div class="card-header">
                                <div class="card-title">
                                    <i class="fas fa-image mr-2"></i>
                                    图像查看器
                                </div>
                            </div>
                            <!-- Card content -->
                            <div class="card-body">

                                <div class="row">
                                    <div class="col px-lg-1 px-xl-2 mb-xl-4 mb-2">
                                        <div class="card elegant-color h100 card-default card-primary">
                                            <div class="card-header">
                                                <div class="card-title">
                                                    <i class="fas fa-eye mr-2"></i>
                                                    图像查看
                                                </div>
                                                <div class="card-tools">
                                                    <button type="button" class="btn btn-tool"
                                                        data-card-widget="collapse" title="Collapse">
                                                        <i class="fas fa-minus"></i>
                                                    </button>
                                                </div>
                                            </div>
                                            <!-- Card content -->
                                            <div class="card-body">
                                                <div class="row">
                                                    <div class="col-md-12">
                                                        <div class="docs-galley mb-3">
                                                            <ul class="docs-pictures clearfix">
                                                                <li>
                                                                    <img data-original="/static/textures/background.png"
                                                                        src="/static/textures/background.png"
                                                                        alt="Cuo Na Lake">
                                                                </li>
                                                            </ul>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col px-lg-1 px-xl-2 mb-xl-4 mb-2">
                                        <div class="card elegant-color h100 card-default card-primary">
                                            <div class="card-header">
                                                <div class="card-title">
                                                    <i class="fas fa-compress mr-2"></i>
                                                    图像压缩
                                                </div>
                                                <div class="card-tools">
                                                    <button type="button" class="btn btn-tool"
                                                        data-card-widget="collapse" title="Collapse">
                                                        <i class="fas fa-minus"></i>
                                                    </button>
                                                </div>
                                            </div>
                                            <!-- Card content -->
                                            <div class="card-body">

                                                <div class="row">
                                                    <div class="col-md-12">
                                                        <div class="p-5 text-center">Drop image here or
                                                            <label class="text-primary">browse...
                                                                <input type="file" class="sr-only" id="file"
                                                                    accept="image/*" ref="input">
                                                            </label>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-md-6">
                                                        <div class="card card-default card-blue">
                                                            <div class="card-header">
                                                                <div class="card-title">
                                                                    <i class="fas fa-option"></i>
                                                                    压缩选项
                                                                </div>
                                                                <div class="card-tools">
                                                                    <button type="button" class="btn btn-tool"
                                                                        data-card-widget="collapse" title="Collapse">
                                                                        <i class="fas fa-minus"></i>
                                                                    </button>
                                                                </div>
                                                            </div>
                                                            <div class="card-body">
                                                                <div class="row">
                                                                    <div class="col-md-6">
                                                                        <div class="form-group form-group-sm">
                                                                            <label>严格模式</label>
                                                                            <div class="icheck-success d-inline">
                                                                                <input class="input-sm" type="checkbox"
                                                                                    checked id="strict_enable">
                                                                                <label for="dither_enable"></label>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="col-md-6">
                                                                        <div class="form-group form-group-sm">
                                                                            <label>操作检查</label>
                                                                            <div class="icheck-success d-inline">
                                                                                <input class="input-sm" type="checkbox"
                                                                                    checked id="strict_enable">
                                                                                <label for="check_operation"></label>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="row">
                                                                    <div class="col-md-3">
                                                                        <div class="form-group form-group-sm">
                                                                            <label class="text-sm">最大高度</label>
                                                                            <input type="number" min="0"
                                                                                class="form-control form-control-sm"
                                                                                id="max_height" placeholder="请输入最大高度">
                                                                        </div>
                                                                    </div>
                                                                    <div class="col-md-3">
                                                                        <div class="form-group form-group-sm">
                                                                            <label class="text-sm">最大宽度</label>
                                                                            <input type="number" min="0"
                                                                                class="form-control form-control-sm"
                                                                                id="max_width" placeholder="请输入最大宽度">
                                                                        </div>
                                                                    </div>
                                                                    <div class="col-md-3">
                                                                        <div class="form-group form-group-sm">
                                                                            <label class="text-sm">最小高度</label>
                                                                            <input type="number" min="0"
                                                                                class="form-control form-control-sm"
                                                                                id="min_height" placeholder="请输入最小高度">
                                                                        </div>
                                                                    </div>
                                                                    <div class="col-md-3">
                                                                        <div class="form-group form-group-sm">
                                                                            <label class="text-sm">最小宽度</label>
                                                                            <input type="number" min="0"
                                                                                class="form-control form-control-sm"
                                                                                id="min_width" placeholder="请输入最小宽度">
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="row">
                                                                    <div class="col-md-3">
                                                                        <div class="form-group form-group-sm">
                                                                            <label class="text-sm">高度</label>
                                                                            <input type="number" min="0"
                                                                                class="form-control form-control-sm"
                                                                                id="height" placeholder="请输入高度">
                                                                        </div>
                                                                    </div>
                                                                    <div class="col-md-3">
                                                                        <div class="form-group form-group-sm">
                                                                            <label class="text-sm">宽度</label>
                                                                            <input type="number" min="0"
                                                                                class="form-control form-control-sm"
                                                                                id="width" placeholder="请输入宽度">
                                                                        </div>
                                                                    </div>
                                                                    <div class="col-md-3">
                                                                        <div class="form-group form-group-sm">
                                                                            <label>图像质量</label>
                                                                            <select
                                                                                class="form-control select2 form-control-sm"
                                                                                id="image_quality" style="width: 100%;">
                                                                                <option value="1" selected="selected">1
                                                                                </option>
                                                                                <option value="0.9">0.9</option>
                                                                                <option value="0.8">0.8</option>
                                                                                <option value="0.7">0.7</option>
                                                                                <option value="0.6">0.6</option>
                                                                                <option value="0.5">0.5</option>
                                                                                <option value="0.4">0.4</option>
                                                                                <option value="0.3">0.3</option>
                                                                                <option value="0.2">0.2</option>
                                                                                <option value="0.1">0.1</option>
                                                                                <option value="0">0</option>
                                                                            </select>
                                                                        </div>
                                                                    </div>
                                                                    <div class="col-md-3">
                                                                        <div class="form-group form-group-sm">
                                                                            <label class="text-sm">MINE</label>
                                                                            <input type="number" min="0"
                                                                                class="form-control form-control-sm"
                                                                                id="mine_type" value="auto"
                                                                                placeholder="Auto">
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="card-footer text-muted">
                                                                图像压缩选项
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-6">
                                                        <div class="card card-default card-blue">
                                                            <div class="card-header">
                                                                <div class="card-title">
                                                                    <i class="fas fa-route"></i>
                                                                    压缩结果
                                                                </div>
                                                                <div class="card-tools">
                                                                    <button type="button" class="btn btn-tool"
                                                                        data-card-widget="collapse" title="Collapse">
                                                                        <i class="fas fa-minus"></i>
                                                                    </button>
                                                                </div>
                                                            </div>
                                                            <div class="card-body">
                                                                <div class="row">
                                                                    <div class="col-md-12">
                                                                        <div class="card card-default card-indigo">
                                                                            <div class="card-header">
                                                                                <div class="card-title">
                                                                                    <i class="fas fa-input-pipe"></i>
                                                                                    输入图像
                                                                                </div>
                                                                                <div class="card-tools">
                                                                                    <button type="button"
                                                                                        class="btn btn-tool"
                                                                                        data-card-widget="collapse"
                                                                                        title="Collapse">
                                                                                        <i class="fas fa-minus"></i>
                                                                                    </button>
                                                                                </div>
                                                                            </div>
                                                                            <div class="card-body">
                                                                                <div class="row">
                                                                                    <div class="col-md-3">

                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="row">
                                                                    <div class="col-md-12">
                                                                        <div class="card card-default card-purple">
                                                                            <div class="card-header">
                                                                                <div class="card-title">
                                                                                    <i class="fas fa-outdent"></i>
                                                                                    输出图像
                                                                                </div>
                                                                                <div class="card-tools">
                                                                                    <button type="button"
                                                                                        class="btn btn-tool"
                                                                                        data-card-widget="collapse"
                                                                                        title="Collapse">
                                                                                        <i class="fas fa-minus"></i>
                                                                                    </button>
                                                                                </div>
                                                                            </div>
                                                                            <div class="card-body">
                                                                                <div class="row">
                                                                                    <div class="col-md-3">

                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="card-footer text-muted">
                                                                图像压缩结果
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="card-footer text-primary text-center mt-2">
                                图像查看器
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>

    {{ basic.load_basic_js() }}
    
    <!-- Vue -->
    <script src="/static/js/plugins/vue.min.js"></script>
    <!-- Compress -->
    <script src="/static/js/plugins/compressor.min.js"></script>
    <!-- Viewer -->
    <script src="/static/js/plugins/viewer.min.js"></script>
    
    <script>
        window.onload = function () {
            'use strict';

            var Viewer = window.Viewer;
            var console = window.console || { log: function () { } };
            var pictures = document.querySelector('.docs-pictures');
            var toggles = document.querySelector('.docs-toggles');
            var buttons = document.querySelector('.docs-buttons');
            var options = {
                // inline: true,
                url: 'data-original',
                ready: function (e) {
                },
                show: function (e) {
                },
                shown: function (e) {
                },
                hide: function (e) {
                },
                hidden: function (e) {
                },
                view: function (e) {
                },
                viewed: function (e) {
                },
                move: function (e) {
                },
                moved: function (e) {
                },
                rotate: function (e) {
                },
                rotated: function (e) {
                },
                scale: function (e) {
                },
                scaled: function (e) {
                },
                zoom: function (e) {
                },
                zoomed: function (e) {
                },
                play: function (e) {
                },
                stop: function (e) {
                }
            };
            var viewer = new Viewer(pictures, options);

            function toggleButtons(mode) {
                var targets;
                var target;
                var length;
                var i;

                if (/modal|inline|none/.test(mode)) {
                    targets = buttons.querySelectorAll('button[data-enable]');

                    for (i = 0, length = targets.length; i < length; i++) {
                        target = targets[i];
                        target.disabled = true;

                        if (String(target.getAttribute('data-enable')).indexOf(mode) > -1) {
                            target.disabled = false;
                        }
                    }
                }
            }
        }
    </script>
</body>